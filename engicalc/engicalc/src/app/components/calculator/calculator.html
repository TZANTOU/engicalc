<div class="actions-bar">
  <button class="btn btn-accent" (click)="exportPDF()">
    <span class="btn-icon"></span> Export PDF
  </button>
</div>

<div class="project-bar">
  <div class="project-field" style="flex: 2">
    <label>Όνομα Έργου</label>
    <input type="text" [(ngModel)]="projectName" placeholder="π.χ. Εμπειρίκος">
  </div>
  <div class="project-field">
    <label>Ημερομηνία</label>
    <input type="date" [(ngModel)]="projectDate">
  </div>
</div>

<!-- TABLE -->
<div class="table-wrapper">
  <div class="table-header">
    <div class="th">#</div>
    <div class="th">Περιγραφή</div>
    <div class="th th-right">Μήκος (m)</div>
    <div class="th th-right">Πλάτος (m)</div>
    <div class="th th-right">Εμβαδόν (m²)</div>
    <div class="th th-right">€/m²</div>
    <div class="th th-right">Σύνολο (€)</div>
    <div class="th"></div>
  </div>

  <div class="table-body">
    @for (row of rows(); track row.id) {
      <div class="table-row">
        <div class="row-number">{{ ($index + 1).toString().padStart(2, '0') }}</div>

        <div class="cell">
          <input
            type="text"
            [value]="row.description"
            (input)="updateRow(row.id, 'description', $any($event.target).value)"
            placeholder="π.χ. Τοιχοποιία Δρομικά">
        </div>

        <div class="cell">
          <input
            type="number"
            [value]="row.length || null"
            (input)="updateRow(row.id, 'length', +$any($event.target).value)"
            placeholder="0.00"
            step="0.01"
            min="0">
        </div>

        <div class="cell">
          <input
            type="number"
            [value]="row.width || null"
            (input)="updateRow(row.id, 'width', +$any($event.target).value)"
            placeholder="0.00"
            step="0.01"
            min="0">
        </div>

        <div class="cell-computed">{{ getArea(row).toFixed(2) }}</div>

        <div class="cell">
          <input
            type="number"
            [value]="row.pricePerM2 || null"
            (input)="updateRow(row.id, 'pricePerM2', +$any($event.target).value)"
            placeholder="0.00"
            step="0.01"
            min="0">
        </div>

        <div class="cell-computed cell-total">€{{ getRowTotal(row).toFixed(2) }}</div>

        <div class="cell" style="text-align: center">
          <button class="btn-danger" (click)="removeRow(row.id)" title="Διαγραφή">✕</button>
        </div>
      </div>
    } @empty {
      <div class="empty-state">
        <div class="empty-icon">📐</div>
        <div>Καμία επιμέτρηση. Πατήστε <strong>Προσθήκη</strong> για να ξεκινήσετε.</div>
      </div>
    }
  </div>

  <div class="add-row-area">
    <button class="btn btn-sm" (click)="addRow()">
      <span class="btn-icon">+</span> Προσθήκη επιμέτρησης
    </button>
  </div>
</div>

<!-- SUMMARY -->
<div class="summary-bar">
  <div class="summary-item">
    <span class="summary-label">Συνολικό Εμβαδόν</span>
    <span class="summary-value">{{ totalArea().toFixed(2) }} m²</span>
  </div>
  <div class="summary-item">
    <span class="summary-label">Γραμμές</span>
    <span class="summary-value">{{ rows().length }}</span>
  </div>
  <div class="summary-item">
    <span class="summary-label">Γενικό Σύνολο</span>
    <span class="summary-value grand">€{{ grandTotal().toFixed(2) }}</span>
  </div>
</div>
